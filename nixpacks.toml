[phases.setup]
nixPkgs = ["r", "R", "gcc", "zlib.dev", "libgit2", "openssl.dev"]

[phases.install]
commands = [
  "R -e 'install.packages(c(\"shiny\", \"remotes\"), repos=\"https://packagemanager.posit.co/cran/latest\")'",
  "R -e 'remotes::install_deps(dependencies=TRUE)'"
]

[phases.build]
commands = []

[start]
cmd = "R -e 'shiny::runApp(port=as.numeric(Sys.getenv(\"PORT\")), host=\"0.0.0.0\")'"

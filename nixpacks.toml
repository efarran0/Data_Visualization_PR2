[phases.setup]
nixPkgs = [
  "R",
  "gcc",
  "zlib.dev",
  "libgit2",
  "openssl.dev",
  "gdal",
  "proj",
  "geos",
  "curl",
  "pkg-config",
  "libxml2.dev" 
]

[phases.install]
commands = [
  "R -e 'install.packages(c(\"readr\", \"mapSpain\", \"shiny\", \"dplyr\", \"plotly\", \"leaflet\", \"htmltools\", \"shinythemes\", \"shinyWidgets\", \"shinyjs\", \"sf\"), repos=\"https://packagemanager.posit.co/cran/latest\")'"
]

[phases.build]
commands = []

[start]
cmd = "R -e 'shiny::runApp(port = as.numeric(Sys.getenv(\"PORT\")), host = \"0.0.0.0\")'"
